library(tidyverse)

input <- "C:/Users/aleksandar.dimitrov/Desktop/INFOLITICA/IFRS 9 ПОДГОТОВКА/titanic.csv"

data <- read.csv(input) %>%
  as_tibble() %>%
  mutate(Survived = factor(Survived, labels = c(0, 1))) # това дава възможност да се обособят два box plot-a  


box <- ggplot(data, aes(x = Survived, y = Age)) +
  geom_boxplot() +
  geom_jitter(width = 0.2, aes(color = Sex)) + # добавя точки на разсейване с оглед по-добравизуализация
  labs(title = "Survival Rate on the Titanic Based on Age") +
  theme_light()

box




Ръководство за Използване на Box and Whiskers Plot (Кутийни Диаграми) в Анализа на Данни

Box and Whiskers Plot, познат още като кутийни диаграми, е тип графика, която предоставя визуален обзор на разпределението на данни. 
Тя е особено полезна за показване на разпределението на данни, включително медианата, квартилите и потенциалните изключения (outliers). 
Ето някои ключови характеристики и съвети за използването на box and whiskers plot:

Структура на Кутийни Диаграми
Кутия: Централната "кутия" на диаграмата представлява междуквартилния размах (IQR) и съдържа средните 50% от данните. 
Долната и горната граница на кутията съответстват съответно на първия (Q1) и третия (Q3) квартил.

Медиана: Линия в средата на кутията показва медианата (втория квартил) на данните.

Whiskers: Линиите, които се простират от кутията до най-високите и най-ниските точки в данните, които не са изключения, показват размаха на данните.

Outliers: Точки, които лежат извън "мустаците", често се считат за изключения.

Кога да Използваме Box and Whiskers Plot
Кутийните диаграми са полезни, когато:

1. Искате да анализирате и визуализирате разпределението на данни.

2. Сравнявате разпределенията на различни групи в рамките на едно и също множество от данни.

3. Търсите потенциални изключения в данните.

4. Искате да разберете дали данните са симетрични, скошени, съсредоточени или разпръснати.

5. Съвети за Създаване на Box and Whiskers Plot

6. Изберете Подходящите Данни: Тези диаграми са най-ефективни, когато работите с числови данни, които имат различни групи за сравнение.

7. Внимавайте с Изключенията: Изключенията могат да предоставят ценна информация за вашите данни, но също така могат да заблудят. Уверете се, че разбирате причините за тяхното съществуване.

8. Сравнение на Групи: Box and whiskers plot са особено полезни за сравняване на разпределенията между няколко групи или категории.

9. Предоставете Контекст: Подобно на всяка друга графика, кутийните диаграми се нуждаят от ясни етикети и легенда, за да бъдат възможно най-информативни.


На един box plot (кутийна диаграма):

- Абсцисата (хоризонталната ос) обикновено представлява категорийна променлива. Това може да бъде всяка групираща променлива като например пол, клас,
категория на продукта, група за лечение в клинично проучване и така нататък. 

- Ординатата (вертикалната ос) обикновено показва числови данни. Това може да бъде всяка количествена променлива, която се мери, като например височина, тегло, време, температура, 
резултати от тест и т.н. 

Подход за добри практики в подобен тип анализи може да включва:

1. Чистота на Данните: Уверете се, че данните са добре почистени преди анализа. В случая с данните от Титаник, има NA стойности за 'Age', които могат да се третират или да се изключат 
от анализа в зависимост от вашите изследователски въпроси.

2. Контекстуален Анализ: Винаги осмисляйте вашите наблюдения в контекста на ситуацията. Например, защо младите хора са имали по-голям шанс за оцеляване? 
Може би поради приоритет при евакуацията или по-голяма физическа способност да стигнат до спасителните лодки.

3. Визуализация: Използвайте визуализации, които най-добре представят вашите данни. Boxplot е отличен избор за показване на разпределението, 
но ако искате да подчертаете различията по пол, може да добавите facet_wrap за да създадете отделни панели за мъже и жени.

4. Статистически Тестове: Разгледайте възможността за прилагане на статистически тестове за сравнение на групи, като тестове за независимост, t-тестове или ANOVA,
ако искате да потвърдите някакви наблюдения със статистическа значимост.

5. Коментар и Интерпретация: Винаги включвайте ясен коментар и интерпретация на вашите графики. Читателите може да не са запознати с данните
или контекста, така че обяснението е критично за разбирането на вашите наблюдения.
